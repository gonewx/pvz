# **2. Requirements (需求)**

## **Functional (功能性需求)**
*   **FR1: 主菜单系统** - 游戏必须提供一个主菜单界面，包含可交互的“开始冒险”和“退出游戏”按钮。
*   **FR2: 游戏场景加载** - 玩家点击“开始冒险”后，系统必须能加载前院白天场景的草坪网格、背景和UI元素。
*   **FR3: 阳光生成机制** - 系统必须实现两种阳光生成方式：
    *   FR3.1: 天空中会周期性地随机掉落阳光。
    *   FR3.2: 玩家种植的向日葵会周期性地生产阳光。
*   **FR4: 阳光收集与计数** - 玩家必须能通过点击阳光来收集它们，并在UI的阳光计数器上实时更新总数。
*   **FR5: 植物选择与冷却** - 游戏界面必须展示一个植物选择栏，包含MVP范围内的植物卡片（向日葵、豌豆射手、坚果墙、樱桃炸弹）。选择一个植物后，该卡片进入冷却倒计时，期间不可用。
*   **FR6: 植物种植** - 玩家必须能在花费足够阳光的前提下，将选择的植物种植在草坪的有效格子内。
*   **FR7: 植物行为** - 已种植的植物必须能执行其核心行为：
    *   FR7.1: **向日葵** - 按预定周期生产阳光。
    *   FR7.2: **豌豆射手** - 当同一行出现僵尸时，能自动发射豌豆子弹进行攻击。
    *   FR7.3: **坚果墙** - 能阻挡僵尸前进，并具有独立的生命值。
    *   FR7.4: **樱桃炸弹** - 种植后短暂延迟即爆炸，消灭周围格子内的所有僵尸。
*   **FR8: 僵尸生成** - 系统必须能根据关卡设计，从屏幕右侧生成一波又一波的僵尸，包括普通、路障和铁桶僵尸。
*   **FR9: 僵尸行为** - 僵尸必须能执行其核心行为：
    *   FR9.1: 沿固定行从右向左移动。
    *   FR9.2: 遇到植物时，会停下来进行啃食。
    *   FR9.3: 具有独立的生命值，当生命值降为零时会死亡并消失。
    *   FR9.4: 路障和铁桶僵尸在防护物被摧毁前具有更高的防御力。
*   **FR10: 伤害与碰撞** - 必须实现豌豆子弹与僵尸的碰撞检测，并根据攻击力计算对僵尸造成的伤害。
*   **FR11: 铲子功能** - 玩家必须能使用铲子工具，移除草坪上任意一个已种植的植物。
*   **FR12: 游戏进程** - 游戏必须能显示关卡进度条，并在最后一波僵尸来临时给予提示。
*   **FR13: 胜利/失败条件** - 必须实现明确的游戏结束条件：
    *   FR13.1: **胜利** - 玩家成功消灭当前关卡的所有僵尸。
    *   FR13.2: **失败** - 任意一个僵尸到达屏幕最左侧的房子。

## **Non-Functional (非功能性需求)**
*   **NFR1: 性能** - 游戏在满负荷场景（大量植物、僵尸和子弹同屏）下，必须保持流畅运行（目标60 FPS）。
*   **NFR2: 忠实度** - 所有的游戏数值（如植物攻击力、僵尸生命值、阳光值、冷却时间）和行为节奏都应与原版PC游戏保持高度一致。
*   **NFR3: 平台兼容性** - 游戏必须能通过Ebitengine成功打包，并在Windows、macOS和Linux平台上独立运行。
*   **NFR4: 可扩展性** - 代码架构必须是模块化的，以便在MVP完成后，能以最小的代价添加新的植物、僵尸或游戏场景。
