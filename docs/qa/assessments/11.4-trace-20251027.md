# Requirements Traceability Matrix

## Story: 11.4 - é“ºè‰çš®åœŸç²’é£æº…ç‰¹æ•ˆ

Date: 2025-10-27
Reviewer: Quinn (Test Architect)

## Coverage Summary

- Total Requirements: 8 (Acceptance Criteria)
- Fully Covered: 7 (87.5%)
- Partially Covered: 1 (12.5%)
- Not Covered: 0 (0%)

**Overall Assessment**: ä¼˜ç§€çš„æµ‹è¯•è¦†ç›–ç‡ã€‚æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å‡æœ‰å•å…ƒæµ‹è¯•æˆ–é›†æˆæµ‹è¯•éªŒè¯ã€‚å”¯ä¸€çš„éƒ¨åˆ†è¦†ç›–é¡¹(AC 6 æ€§èƒ½æµ‹è¯•)åœ¨å¼€å‘ç¯å¢ƒä¸­éš¾ä»¥ç²¾ç¡®éªŒè¯,å»ºè®®åœ¨çœŸå®è®¾å¤‡ä¸Šè¡¥å……æµ‹è¯•ã€‚

## Requirement Mappings

### AC1: è§¦å‘æ—¶æœºå‡†ç¡®

**Coverage: FULL** âœ…

**è¦æ±‚**: ç²’å­æ•ˆæœåœ¨é“ºè‰çš®åŠ¨ç”»è¿›è¡Œæ—¶åŒæ­¥è§¦å‘,éšè‰çš®å·ç§»åŠ¨è€Œäº§ç”Ÿ

**æµ‹è¯•æ˜ å°„**:

1. **å•å…ƒæµ‹è¯•**: `pkg/systems/sodding_system_test.go::TestCreateSodRollParticleEmitter`
   - Given: SoddingSystem å¯åŠ¨åŠ¨ç”»æ—¶å¯ç”¨ç²’å­ç‰¹æ•ˆ
   - When: è°ƒç”¨ `StartAnimation(nil, []int{3}, 0, 127, true)`
   - Then: ç²’å­å‘å°„å™¨å®ä½“è¢«åˆ›å»º (`sodRollEmitterID != 0`)
   - Coverage: éªŒè¯ç²’å­å‘å°„å™¨åœ¨åŠ¨ç”»å¯åŠ¨æ—¶åˆ›å»º

2. **å•å…ƒæµ‹è¯•**: `pkg/systems/sodding_system_test.go::TestParticleEmitterNotCreatedWhenDisabled`
   - Given: SoddingSystem å¯åŠ¨åŠ¨ç”»æ—¶ç¦ç”¨ç²’å­ç‰¹æ•ˆ
   - When: è°ƒç”¨ `StartAnimation(nil, []int{3}, 0, 127, false)`
   - Then: ç²’å­å‘å°„å™¨å®ä½“æœªåˆ›å»º (`sodRollEmitterID == 0`)
   - Coverage: éªŒè¯ç²’å­ç‰¹æ•ˆå¯è¢«æ­£ç¡®ç¦ç”¨

3. **é›†æˆæµ‹è¯•**: è§†è§‰éªŒè¯(Dev Notes Task 9)
   - Given: æ¸¸æˆå¯åŠ¨,å…³å¡é…ç½®å¯ç”¨é“ºè‰çš®åŠ¨ç”»å’Œç²’å­ç‰¹æ•ˆ
   - When: é“ºè‰çš®åŠ¨ç”»æ’­æ”¾
   - Then: åœŸç²’é£æº…ç‰¹æ•ˆåŒæ—¶å‡ºç°,éšè‰çš®å·ç§»åŠ¨
   - Coverage: éªŒè¯è§¦å‘æ—¶æœºå’Œè§†è§‰åŒæ­¥æ€§

**å®ç°è¯æ®**:
- `pkg/systems/sodding_system.go:124-126` - æ ¹æ® `enableParticles` å‚æ•°åˆ›å»ºç²’å­å‘å°„å™¨
- `pkg/scenes/game_scene.go:866` - æ·»åŠ  `particleSystem.Update()` ç¡®ä¿ç²’å­ç³»ç»Ÿåœ¨åŠ¨ç”»æœŸé—´æ›´æ–°
- Dev Notes é—®é¢˜ 3 ä¿®å¤ - è§£å†³äº†ç²’å­ç³»ç»Ÿæœªæ›´æ–°å¯¼è‡´åªç”Ÿæˆ 2 ä¸ªç²’å­çš„å…³é”®é—®é¢˜

### AC2: ç²’å­é…ç½®æ­£ç¡®

**Coverage: FULL** âœ…

**è¦æ±‚**: ä½¿ç”¨åŸç‰ˆ `SodRoll.xml` ç²’å­é…ç½®(åœŸç²’å›¾ç‰‡ã€é£æº…è§’åº¦ã€é‡åŠ›ç­‰)

**æµ‹è¯•æ˜ å°„**:

1. **ä»£ç å®¡æŸ¥**: éªŒè¯é…ç½®ä½¿ç”¨
   - Given: éœ€è¦åˆ›å»º SodRoll ç²’å­æ•ˆæœ
   - When: è°ƒç”¨ `entities.CreateParticleEffect(em, rm, "SodRoll", x, y)`
   - Then: ä½¿ç”¨ ResourceManager åŠ è½½ "SodRoll" é…ç½®
   - Coverage: éªŒè¯é…ç½®æ–‡ä»¶æ­£ç¡®å¼•ç”¨

2. **é›†æˆæµ‹è¯•**: Task 4 é…ç½®éªŒè¯(Dev Notes)
   - Given: SodRoll.xml é…ç½®æ–‡ä»¶
   - When: å¼€å‘è€…éªŒè¯é…ç½®å‚æ•°
   - Then: SpawnRate=200â†’100, LaunchSpeed=100, LaunchAngle=[90,180], ParticleSpinSpeed=[-1720,1720], Acceleration.Y=10, Friction=0.05
   - Coverage: æ‰€æœ‰å…³é”®å‚æ•°ç¬¦åˆåŸç‰ˆè¦æ±‚

3. **èµ„æºç®¡ç†**: `assets/config/resources.yaml` é…ç½®
   - Given: æ¸¸æˆå¯åŠ¨æ—¶åŠ è½½èµ„æº
   - When: ResourceManager åˆå§‹åŒ–
   - Then: SodRoll.xml å’Œ IMAGE_DIRTSMALL å·²é…ç½®å¹¶åŠ è½½
   - Coverage: éªŒè¯èµ„æºé…ç½®å®Œæ•´æ€§

**å®ç°è¯æ®**:
- `pkg/systems/sodding_system.go:424-430` - ä½¿ç”¨ "SodRoll" é…ç½®åç§°
- Dev Notes Section "Relevant Architecture" - è¯¦ç»†åˆ—å‡ºäº†æ‰€æœ‰é…ç½®å‚æ•°
- æ–‡æ¡£æ˜ç¡®è¦æ±‚ "assets/effect ä¸‹çš„æ‰€æœ‰é…ç½®æ–‡ä»¶éƒ½ä¸èƒ½ä¿®æ”¹" - ä¿è¯ä½¿ç”¨åŸç‰ˆé…ç½®

### AC3: ç²’å­ä½ç½®åŒæ­¥

**Coverage: FULL** âœ…

**è¦æ±‚**: ç²’å­å‘å°„å™¨ä½ç½®è·Ÿéšè‰çš®å·åŠ¨ç”»çš„å½“å‰ä½ç½®(ä¸–ç•Œåæ ‡)

**æµ‹è¯•æ˜ å°„**:

1. **é…ç½®é©±åŠ¨**: SystemPosition è‡ªåŠ¨æ’å€¼
   - Given: SodRoll.xml é…ç½® `<SystemField><FieldType>SystemPosition</FieldType><X>0 740</X><Y>30 0</Y></SystemField>`
   - When: ParticleSystem.Update() å¤„ç†å‘å°„å™¨
   - Then: å‘å°„å™¨ä½ç½®ä» InitialX+0 ç§»åŠ¨åˆ° InitialX+740 (2 ç§’åŠ¨ç”»)
   - Coverage: éªŒè¯ SystemPosition æ’å€¼æœºåˆ¶

2. **ä»£ç å®ç°**: ç›¸å¯¹åç§»è®¡ç®—(Story 11.4 ä¿®å¤)
   - Given: EmitterComponent æœ‰ InitialX/InitialY å­—æ®µ
   - When: ParticleSystem åº”ç”¨ SystemPosition
   - Then: `position = InitialX + offsetX` (ç›¸å¯¹åç§»,éç»å¯¹ä½ç½®)
   - Coverage: éªŒè¯ä½ç½®è®¡ç®—é€»è¾‘æ­£ç¡®

3. **é›†æˆæµ‹è¯•**: è§†è§‰éªŒè¯(Dev Notes Task 9)
   - Given: é“ºè‰çš®åŠ¨ç”»æ’­æ”¾
   - When: è§‚å¯Ÿç²’å­å‘å°„ä½ç½®
   - Then: ç²’å­ä»è‰çš®å·è¾¹ç¼˜å‘å¤–é£æº…,è·Ÿéšè‰çš®å·ç§»åŠ¨
   - Coverage: éªŒè¯è§†è§‰å¯¹é½æ•ˆæœ

**å®ç°è¯æ®**:
- `pkg/systems/particle_system.go:179-209` - SystemPosition æ’å€¼å’Œç›¸å¯¹åç§»åº”ç”¨
- `pkg/components/emitter_component.go:113-114` - InitialX/InitialY å­—æ®µå®šä¹‰
- `pkg/entities/particle_factory.go:211-212` - åˆå§‹ä½ç½®è®¾ç½®
- Dev Notes é—®é¢˜ 2 ä¿®å¤ - ä¿®å¤äº† SystemPosition ä½¿ç”¨ç»å¯¹åæ ‡çš„ Bug

### AC4: ç²’å­å‘å°„é¢‘ç‡

**Coverage: FULL** âœ…

**è¦æ±‚**: æ ¹æ®åŸç‰ˆé…ç½®,åœ¨è‰çš®å·ç§»åŠ¨è¿‡ç¨‹ä¸­æŒç»­å‘å°„ç²’å­(200ç²’å­/ç§’)

**æµ‹è¯•æ˜ å°„**:

1. **é…ç½®éªŒè¯**: Task 4(Dev Notes)
   - Given: SodRoll.xml é…ç½®
   - When: è¯»å– SpawnRate å‚æ•°
   - Then: SpawnRate="200 100" (åˆå§‹200ç²’å­/ç§’,åæœŸ100ç²’å­/ç§’)
   - Coverage: éªŒè¯é…ç½®æ­£ç¡®

2. **ç³»ç»Ÿè¡Œä¸º**: ParticleSystem å‘å°„é€»è¾‘
   - Given: å‘å°„å™¨ Active=true, SpawnRate=200
   - When: ParticleSystem.Update() æ¯å¸§å¤„ç†
   - Then: æ ¹æ® SpawnRate å’Œ deltaTime è®¡ç®—ç”Ÿæˆç²’å­æ•°é‡
   - Coverage: éªŒè¯å‘å°„é¢‘ç‡è®¡ç®—

3. **é›†æˆæµ‹è¯•**: è§†è§‰éªŒè¯(Dev Notes Task 9)
   - Given: é“ºè‰çš®åŠ¨ç”»æ’­æ”¾ 2 ç§’
   - When: è§‚å¯Ÿç²’å­ç”Ÿæˆæ•°é‡
   - Then: åˆæœŸå¯†é›†é£æº…,åæœŸé€æ¸å‡å°‘(ç¬¦åˆ 200â†’100 çš„æ¸å˜)
   - Coverage: éªŒè¯æŒç»­å‘å°„å’Œé¢‘ç‡å˜åŒ–

**å®ç°è¯æ®**:
- `pkg/systems/particle_system.go` - SpawnRate å…³é”®å¸§æ’å€¼å’Œç²’å­ç”Ÿæˆé€»è¾‘
- Dev Notes é—®é¢˜ 3 ä¿®å¤ - å…³é”®ä¿®å¤:æ·»åŠ  `particleSystem.Update()` åˆ°åŠ¨ç”»æ›´æ–°å¾ªç¯,è§£å†³åªç”Ÿæˆ 2 ä¸ªç²’å­çš„ Bug
- Dev Notes æ—¥å¿—è¯æ® - "ä¿®å¤åï¼ˆæŒç»­å‘å°„ï¼‰:Age=0.017, TotalLaunched=125/126..."

### AC5: ç²’å­æ•ˆæœè‡ªç„¶

**Coverage: FULL** âœ…

**è¦æ±‚**: åœŸç²’ä»è‰çš®è¾¹ç¼˜å‘å¤–é£æº…,å—é‡åŠ›å½±å“è‡ªç„¶è½ä¸‹,æœ‰éšæœºæ—‹è½¬

**æµ‹è¯•æ˜ å°„**:

1. **é…ç½®éªŒè¯**: Task 4(Dev Notes)
   - Given: SodRoll.xml é…ç½®
   - When: è¯»å–ç‰©ç†å‚æ•°
   - Then: LaunchAngle=[90,180]åº¦(å‘ä¸Šé£æº…), Acceleration.Y=10(é‡åŠ›), ParticleSpinSpeed=[-1720,1720]åº¦/ç§’(éšæœºæ—‹è½¬), Friction=0.05(ç©ºæ°”é˜»åŠ›)
   - Coverage: éªŒè¯ç‰©ç†å‚æ•°é…ç½®

2. **ç²’å­ç³»ç»Ÿ**: ç‰©ç†åŠ›åœºåº”ç”¨
   - Given: ç²’å­è¢«åˆ›å»ºæ—¶æœ‰åˆå§‹é€Ÿåº¦å’Œæ—‹è½¬é€Ÿåº¦
   - When: ParticleSystem.Update() åº”ç”¨åŠ›åœº(é‡åŠ›ã€æ‘©æ“¦)
   - Then: ç²’å­é€Ÿåº¦å—é‡åŠ›å’Œæ‘©æ“¦å½±å“,é€æ¸å‘ä¸‹è¿åŠ¨å¹¶å‡é€Ÿ
   - Coverage: éªŒè¯ç‰©ç†æ¨¡æ‹Ÿæ­£ç¡®

3. **é›†æˆæµ‹è¯•**: è§†è§‰éªŒè¯(Dev Notes Task 9)
   - Given: é“ºè‰çš®åŠ¨ç”»æ’­æ”¾
   - When: è§‚å¯Ÿç²’å­è¿åŠ¨è½¨è¿¹
   - Then:
     - ç²’å­ä»è‰çš®å·è¾¹ç¼˜å‘å¤–é£æº… âœ…
     - ç²’å­å—é‡åŠ›å½±å“è‡ªç„¶è½ä¸‹ âœ…
     - ç²’å­æœ‰éšæœºæ—‹è½¬æ•ˆæœ âœ…
   - Coverage: éªŒè¯æ‰€æœ‰è‡ªç„¶æ•ˆæœç‰¹å¾

**å®ç°è¯æ®**:
- Dev Notes Task 9 - æ‰€æœ‰è§†è§‰éªŒè¯é¡¹å‡å·²ç¡®è®¤ âœ…
- Dev Notes "Relevant Architecture" - è¯¦ç»†è§£é‡Šäº†æ‰€æœ‰ç‰©ç†å‚æ•°çš„ç”¨é€”
- `pkg/systems/particle_system.go` - å®ç°äº†å®Œæ•´çš„ç²’å­ç‰©ç†ç³»ç»Ÿ(é‡åŠ›ã€æ‘©æ“¦ã€æ—‹è½¬)

### AC6: æ€§èƒ½ç¨³å®š

**Coverage: PARTIAL** âš ï¸

**è¦æ±‚**: ç²’å­æ¸²æŸ“ä¸å½±å“æ¸¸æˆå¸§ç‡(60 FPS),ä½¿ç”¨å¯¹è±¡æ± ä¼˜åŒ–

**æµ‹è¯•æ˜ å°„**:

1. **ä»£ç å®¡æŸ¥**: å¯¹è±¡æ± æœºåˆ¶
   - Given: ç²’å­ç³»ç»Ÿå®ç°
   - When: æ£€æŸ¥ç²’å­åˆ›å»ºå’Œå›æ”¶é€»è¾‘
   - Then: ä½¿ç”¨å¯¹è±¡æ± (EntityManager çš„å®ä½“å›æ”¶æœºåˆ¶)
   - Coverage: éªŒè¯å¯¹è±¡æ± å­˜åœ¨ âœ…

2. **é›†æˆæµ‹è¯•**: Task 9 å¸§ç‡éªŒè¯(Dev Notes)
   - Given: é“ºè‰çš®åŠ¨ç”»æ’­æ”¾
   - When: è§‚å¯Ÿæ¸¸æˆå¸§ç‡
   - Then: "éªŒè¯å¸§ç‡ç¨³å®šåœ¨ 60 FPS" âœ…
   - Coverage: éªŒè¯å¼€å‘ç¯å¢ƒå¸§ç‡ âœ…

3. **æ€§èƒ½æµ‹è¯•**: **ç¼ºå¤±** âŒ
   - Given: ä½ç«¯è®¾å¤‡æˆ–é™é¢‘æ¨¡å¼
   - When: æ’­æ”¾é“ºè‰çš®åŠ¨ç”»(200 ç²’å­/ç§’)
   - Then: å¸§ç‡åº”â‰¥50 FPS,æ— æ˜æ˜¾å¡é¡¿
   - Coverage: **æœªè¦†ç›–** - ç¼ºå°‘ä½ç«¯è®¾å¤‡æ€§èƒ½æµ‹è¯•

**éƒ¨åˆ†è¦†ç›–åŸå› **:
- âœ… å¼€å‘ç¯å¢ƒéªŒè¯äº† 60 FPS
- âœ… ä½¿ç”¨äº†å¯¹è±¡æ± ä¼˜åŒ–
- âŒ ç¼ºå°‘ä½ç«¯è®¾å¤‡æ€§èƒ½æµ‹è¯•
- âŒ ç¼ºå°‘æ€§èƒ½ç›‘æ§æ—¥å¿—(å¦‚ç²’å­è®¡æ•°å³°å€¼ã€æ¸²æŸ“æ—¶é—´)

**å»ºè®®è¡¥å……æµ‹è¯•**:
- åœ¨ä½ç«¯è®¾å¤‡æˆ– CPU é™é¢‘æ¨¡å¼ä¸‹æµ‹è¯•
- æ·»åŠ æ€§èƒ½ç›‘æ§æ—¥å¿—(--verbose æ¨¡å¼)
- æµ‹é‡ç²’å­æ•°é‡å³°å€¼(æœŸæœ›â‰¤200 ä¸ª)

**å®ç°è¯æ®**:
- Dev Notes Task 9 - "éªŒè¯å¸§ç‡ç¨³å®šåœ¨ 60 FPS" âœ…
- `pkg/ecs/entity_manager.go` - å®ä½“ç®¡ç†å™¨æä¾›å¯¹è±¡æ± æœºåˆ¶
- é£é™©è¯„ä¼° PERF-001 - å·²è¯†åˆ«ä½ç«¯è®¾å¤‡æ€§èƒ½é£é™©

### AC7: é…ç½®é©±åŠ¨

**Coverage: FULL** âœ…

**è¦æ±‚**: å…³å¡é…ç½®æ”¯æŒå¼€å…³é“ºè‰çš®åŠ¨ç”»å’Œç²’å­ç‰¹æ•ˆ(æ•™å­¦å…³å¡å¯ç¦ç”¨)

**æµ‹è¯•æ˜ å°„**:

1. **é…ç½®ç»“æ„**: Task 2(Dev Notes)
   - Given: LevelConfig ç»“æ„
   - When: æ·»åŠ å­—æ®µ `SodRollAnimation bool` å’Œ `SodRollParticles bool`
   - Then: å­—æ®µå®šä¹‰åœ¨ `pkg/config/level_config.go:40-41`
   - Coverage: éªŒè¯é…ç½®å­—æ®µå­˜åœ¨ âœ…

2. **é…ç½®æ–‡ä»¶**: `data/levels/level-1-1.yaml`
   - Given: å…³å¡é…ç½®æ–‡ä»¶
   - When: è¯»å–é…ç½®
   - Then: `sodRollAnimation: true`, `sodRollParticles: true`
   - Coverage: éªŒè¯é…ç½®æ–‡ä»¶ç¤ºä¾‹ âœ…

3. **é…ç½®ä½¿ç”¨**: `pkg/scenes/game_scene.go`
   - Given: æ¸¸æˆåœºæ™¯åˆå§‹åŒ–
   - When: è¯»å–å…³å¡é…ç½® `s.gameState.CurrentLevel.SodRollParticles`
   - Then: æ ¹æ®é…ç½®å†³å®šæ˜¯å¦å¯ç”¨ç²’å­ç‰¹æ•ˆ
   - Coverage: éªŒè¯é…ç½®è¯»å–å’Œåº”ç”¨ âœ…

4. **å•å…ƒæµ‹è¯•**: `pkg/systems/sodding_system_test.go::TestParticleEmitterNotCreatedWhenDisabled`
   - Given: å¯åŠ¨åŠ¨ç”»æ—¶ä¼ é€’ `enableParticles=false`
   - When: SoddingSystem å¤„ç†
   - Then: ç²’å­å‘å°„å™¨æœªåˆ›å»º
   - Coverage: éªŒè¯ç¦ç”¨é€»è¾‘ âœ…

**å®ç°è¯æ®**:
- `pkg/config/level_config.go:40-41` - é…ç½®å­—æ®µå®šä¹‰
- `pkg/scenes/game_scene.go:880, 853` - è¯»å–é…ç½®å¹¶ä¼ é€’ç»™ SoddingSystem
- `data/levels/level-1-1.yaml:21-22` - é…ç½®ç¤ºä¾‹
- Dev Notes Completion Note #2 - "å…³å¡é…ç½®æ‰©å±•:åœ¨ LevelConfig ä¸­æ·»åŠ  SodRollAnimation å’Œ SodRollParticles å­—æ®µ" âœ…

### AC8: åŠ¨ç”»å®Œæˆæ¸…ç†

**Coverage: FULL** âœ…

**è¦æ±‚**: é“ºè‰çš®åŠ¨ç”»å®Œæˆå,ç²’å­å‘å°„å™¨è‡ªåŠ¨åœæ­¢å¹¶æ¸…ç†å·²æœ‰ç²’å­

**æµ‹è¯•æ˜ å°„**:

1. **å•å…ƒæµ‹è¯•**: `pkg/systems/sodding_system_test.go::TestParticleEmitterStopsAfterAnimation`
   - Given: é“ºè‰çš®åŠ¨ç”»æ’­æ”¾,ç²’å­å‘å°„å™¨å·²åˆ›å»º
   - When: è°ƒç”¨ `SoddingSystem.Update(3.0)` (è¶…è¿‡åŠ¨ç”»æ—¶é•¿)
   - Then:
     - ç²’å­å‘å°„å™¨ Active=false âœ…
     - SoddingSystem.sodRollEmitterID=0 âœ…
     - ç²’å­å‘å°„å™¨æœ‰ LifetimeComponent(MaxLifetime=0.35s) âœ…
   - Coverage: éªŒè¯åœæ­¢å’Œæ¸…ç†é€»è¾‘å®Œæ•´

2. **ä»£ç å®ç°**: `pkg/systems/sodding_system.go::completeAnimation()`
   - Given: åŠ¨ç”»å®Œæˆæ¡ä»¶è§¦å‘
   - When: æ‰§è¡Œæ¸…ç†é€»è¾‘
   - Then:
     - è®¾ç½® `emitterComp.Active = false` (åœæ­¢å‘å°„æ–°ç²’å­)
     - æ·»åŠ  LifetimeComponent(0.35s) (å»¶è¿Ÿæ¸…ç†,ç­‰ç²’å­è‡ªç„¶æ¶ˆå¤±)
     - æ¸…ç©º `sodRollEmitterID` (é‡Šæ”¾å¼•ç”¨)
   - Coverage: éªŒè¯æ¸…ç†æ­¥éª¤å®Œæ•´

3. **ç”Ÿå‘½å‘¨æœŸç®¡ç†**: LifetimeSystem è‡ªåŠ¨æ¸…ç†
   - Given: ç²’å­å‘å°„å™¨æœ‰ LifetimeComponent
   - When: LifetimeSystem.Update() å¤„ç†
   - Then: 0.35 ç§’åè‡ªåŠ¨é”€æ¯å‘å°„å™¨å®ä½“å’Œæ‰€æœ‰å·²æœ‰ç²’å­
   - Coverage: éªŒè¯è‡ªåŠ¨æ¸…ç†æœºåˆ¶

**å®ç°è¯æ®**:
- `pkg/systems/sodding_system.go:226-248` - completeAnimation() æ¸…ç†é€»è¾‘
- Dev Notes Completion Note #5 - "ç”Ÿå‘½å‘¨æœŸç®¡ç†:å®ç°ç²’å­å‘å°„å™¨åœæ­¢å’Œå»¶è¿Ÿæ¸…ç†é€»è¾‘(0.35ç§’åæ¸…ç†)" âœ…
- Dev Notes Task 5 - æ‰€æœ‰å­ä»»åŠ¡å®Œæˆ âœ…

## Coverage Gaps Analysis

### Gap 1: ä½ç«¯è®¾å¤‡æ€§èƒ½æµ‹è¯• (AC6)

**Severity**: Medium
**Affected AC**: AC6 (æ€§èƒ½ç¨³å®š)
**Gap Description**: ç¼ºå°‘ä½ç«¯è®¾å¤‡æˆ– CPU é™é¢‘æ¨¡å¼ä¸‹çš„æ€§èƒ½æµ‹è¯•

**Suggested Test**:
- **Type**: Performance/Integration
- **Description**:
  ```
  Given: ä½ç«¯è®¾å¤‡æˆ– CPU é™é¢‘åˆ° 30%
  When: æ’­æ”¾é“ºè‰çš®åŠ¨ç”»(2 ç§’,200 ç²’å­/ç§’)
  Then:
    - å¸§ç‡â‰¥50 FPS (å¯æ¥å—çš„æ€§èƒ½)
    - ç²’å­æ•°é‡å³°å€¼â‰¤200 ä¸ª
    - æ— æ˜æ˜¾å¡é¡¿æˆ–æ‰å¸§
  ```
- **Priority**: P1 (å»ºè®®åœ¨å‘å¸ƒå‰è¡¥å……)
- **Owner**: dev

**Mitigation**: åœ¨çœŸå®è®¾å¤‡æˆ–æ¨¡æ‹Ÿå™¨ä¸Šè¿›è¡Œæµ‹è¯•,æˆ–æ·»åŠ æ€§èƒ½ç›‘æ§æ—¥å¿—

## Critical Gaps Requiring Immediate Attention

**æ— ** - æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å·²è¦†ç›–,å”¯ä¸€çš„éƒ¨åˆ†è¦†ç›–é¡¹(ä½ç«¯è®¾å¤‡æ€§èƒ½)å±äºä¼˜åŒ–èŒƒç•´,ä¸å½±å“åŠŸèƒ½æ­£ç¡®æ€§ã€‚

## Test Design Recommendations

åŸºäºå¯è¿½æº¯æ€§åˆ†æ,ä»¥ä¸‹æ˜¯æµ‹è¯•ç­–ç•¥å»ºè®®:

### 1. è¡¥å……æ€§èƒ½æµ‹è¯• (Gap 1)

**Priority**: P1
**Test Level**: Integration/Performance
**Rationale**: AC6 è¦æ±‚æ€§èƒ½ç¨³å®š,ä½†å½“å‰åªåœ¨å¼€å‘ç¯å¢ƒéªŒè¯è¿‡

**Test Scenarios**:
1. ä½ç«¯è®¾å¤‡æ€§èƒ½æµ‹è¯•(å¦‚æ ‘è“æ´¾æˆ– ARM è®¾å¤‡)
2. CPU é™é¢‘æ¨¡å¼æµ‹è¯•(ä½¿ç”¨ç³»ç»Ÿå·¥å…·é™åˆ¶ CPU é¢‘ç‡)
3. æ·»åŠ æ€§èƒ½ç›‘æ§æ—¥å¿—(ç²’å­è®¡æ•°ã€å¸§æ—¶é—´)

### 2. è¾¹ç•Œæ¡ä»¶æµ‹è¯• (Future)

**Priority**: P2
**Test Level**: Unit
**Rationale**: å¢å¼ºé²æ£’æ€§,å¤„ç†å¼‚å¸¸æƒ…å†µ

**Test Scenarios**:
1. èµ„æºåŠ è½½å¤±è´¥æ—¶çš„é™çº§è¡Œä¸º(SodRoll.xml ç¼ºå¤±)
2. å‘å°„å™¨åˆ›å»ºå¤±è´¥æ—¶çš„é”™è¯¯å¤„ç†(å†…å­˜ä¸è¶³)
3. åŠ¨ç”»ä¸­é€”å–æ¶ˆçš„æ¸…ç†é€»è¾‘(å…³å¡é‡å¯)

### 3. é…ç½®éªŒè¯æµ‹è¯• (Future)

**Priority**: P3
**Test Level**: Integration
**Rationale**: é˜²æ­¢é…ç½®é”™è¯¯å¯¼è‡´çš„è§†è§‰é—®é¢˜

**Test Scenarios**:
1. éªŒè¯ SystemPosition åç§»è®¡ç®—(ä¸åŒå…³å¡é…ç½®)
2. éªŒè¯ç²’å­ä½ç½®å¯¹é½(ä¸åŒå±å¹•åˆ†è¾¨ç‡)
3. é…ç½®å‚æ•°è¾¹ç•Œå€¼æµ‹è¯•(SpawnRate=0, EmitterBoxY æå€¼)

## Risk Assessment

### High Risk - Partial Coverage

- **AC6 (æ€§èƒ½ç¨³å®š)**: âš ï¸ ç¼ºå°‘ä½ç«¯è®¾å¤‡æµ‹è¯•
  - **Risk**: å¯èƒ½åœ¨ä½ç«¯è®¾å¤‡ä¸Šå‡ºç°å¸§ç‡ä¸‹é™
  - **Probability**: Medium (éƒ¨åˆ†ç”¨æˆ·ä½¿ç”¨ä½ç«¯è®¾å¤‡)
  - **Impact**: High (å½±å“ç”¨æˆ·ä½“éªŒ)
  - **Action**: å»ºè®®åœ¨å‘å¸ƒå‰è¡¥å……æ€§èƒ½æµ‹è¯•

### Low Risk - Full Coverage

- **æ‰€æœ‰å…¶ä»– AC (AC1-5, AC7-8)**: âœ… å®Œæ•´è¦†ç›–
  - **Risk**: Low (åŠŸèƒ½å®ç°æ­£ç¡®,æµ‹è¯•å……åˆ†)
  - **Confidence**: High (å•å…ƒæµ‹è¯• + é›†æˆæµ‹è¯• + è§†è§‰éªŒè¯)

## Traceability Best Practices Observed

âœ… **ä¼˜ç§€å®è·µ**:
1. æ¯ä¸ª AC éƒ½æœ‰å¯¹åº”çš„æµ‹è¯•æˆ–éªŒè¯
2. æµ‹è¯•ç±»å‹å¤šæ ·(å•å…ƒã€é›†æˆã€è§†è§‰éªŒè¯)
3. Dev Notes è¯¦ç»†è®°å½•äº†æµ‹è¯•è¿‡ç¨‹å’Œç»“æœ
4. å•å…ƒæµ‹è¯•è€ƒè™‘äº†èµ„æºåŠ è½½å¤±è´¥åœºæ™¯
5. ä½¿ç”¨ Given-When-Then æ¨¡å¼æ¸…æ™°æè¿°æµ‹è¯•æ„å›¾

ğŸ“ **æ”¹è¿›å»ºè®®**:
1. è¡¥å……æ€§èƒ½æµ‹è¯•(AC6)
2. æ·»åŠ æ€§èƒ½ç›‘æ§æ—¥å¿—(ä¾¿äºåç»­ä¼˜åŒ–)
3. è€ƒè™‘è‡ªåŠ¨åŒ–è§†è§‰å›å½’æµ‹è¯•(æœªæ¥æ”¹è¿›)

## Conclusion

**Overall Traceability Score: 87.5%** (7/8 AC å®Œå…¨è¦†ç›–,1/8 éƒ¨åˆ†è¦†ç›–)

æ­¤ Story çš„éœ€æ±‚å¯è¿½æº¯æ€§è¡¨ç°ä¼˜ç§€:
- âœ… æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å‡æœ‰æµ‹è¯•éªŒè¯
- âœ… æµ‹è¯•ç±»å‹è¦†ç›–å•å…ƒã€é›†æˆå’Œè§†è§‰éªŒè¯
- âœ… Dev Notes æä¾›äº†è¯¦ç»†çš„æµ‹è¯•è¯æ®
- âš ï¸ å”¯ä¸€çš„æ”¹è¿›ç©ºé—´æ˜¯è¡¥å……ä½ç«¯è®¾å¤‡æ€§èƒ½æµ‹è¯•

**å»ºè®®çŠ¶æ€**: âœ… **Ready for Done** (å¯é€‰:è¡¥å……æ€§èƒ½æµ‹è¯•åæ›´ä¼˜)
