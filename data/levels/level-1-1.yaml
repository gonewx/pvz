# Level 1-1 (Story 17.2 新格式)
id: "1-1"
name: "前院白天 1-1"
description: "教学关卡：学习基本的植物种植和僵尸防御"

# === Story 17.2: 顶层字段 ===
flags: 0                       # 本关卡无旗帜波次
sceneType: "day"               # 场景类型: 白天前院
rowMax: 5                      # 最大行数: 前院 5 行

# === 开场配置 ===
openingType: "tutorial"       # 教学关卡
enabledLanes: [3]             # 只启用第3行（中间行）
availablePlants:              # 只有豌豆射手
  - "peashooter"
rewardPlant: "sunflower"      # Story 8.3: 完成本关奖励向日葵
skipOpening: false            # 启用完整开场动画(铺草皮 + 僵尸预告)
initialSun: 150               # 初始阳光150（原版1-1关卡配置，足够种植1个豌豆射手）

# Story 8.2 QA改进：背景和草皮配置
backgroundImage: "IMAGE_BACKGROUND1UNSODDED"  # 使用未铺草皮的背景
sodRowImage: "IMAGE_SOD1ROW"                  # 铺草皮后叠加1行草地图片
showSoddingAnim: true                         # 播放铺草皮动画
soddingAnimDelay: 1.0                         # 游戏开始1秒后播放动画
preSoddedLanes: []                           # 预先渲染第3行草皮到叠加层

# Story 11.4：铺草皮粒子特效配置
sodRollAnimation: true                        # 启用铺草皮动画
sodRollParticles: true                        # 启用土粒飞溅特效

# Story 8.2: 教学步骤配置（符合原版1-1流程）
tutorialSteps:
  # 步骤1：游戏开始 → 直接提示种植（因为阳光已经150）
  - trigger: "gameStart"
    textKey: "ADVICE_CLICK_SEED_PACKET"
    action: "waitForSeedClick"

  # 步骤2：点击豌豆射手卡片
  - trigger: "seedClicked"
    textKey: "ADVICE_CLICK_ON_GRASS"
    action: "waitForPlantPlaced"

  # 步骤3：种植第一个豌豆射手
  - trigger: "plantPlaced"
    textKey: "ADVICE_PLANTED_PEASHOOTER"
    action: "waitForSunSpawn"

  # 步骤4：第一颗阳光生成后（由TutorialSystem触发）
  - trigger: "sunSpawned"
    textKey: "ADVICE_CLICK_ON_SUN"
    action: "waitForSunClick"

  # 步骤5：第一次点击阳光
  - trigger: "sunClicked"
    textKey: "ADVICE_CLICKED_ON_SUN"
    action: "waitForEnoughSun"

  # 步骤6：阳光≥100时收集阳光（重复提醒，需要时长检测）
  - trigger: "sunClickedWhenEnough"
    textKey: "ADVICE_ENOUGH_SUN"
    action: "reminder"

  # 步骤7：阳光≥100 且 卡片冷却完成（第一次达到可种植状态）
  - trigger: "enoughSunAndCooldown"
    textKey: "ADVICE_CLICK_PEASHOOTER"
    action: "waitForSecondSeedClick"

  # 步骤8：点击卡片准备种植第二个
  - trigger: "secondSeedClicked"
    textKey: "ADVICE_CLICK_ON_GRASS"
    action: "waitForSecondPlantPlaced"

  # 步骤9：种植第二个豌豆射手
  - trigger: "secondPlantPlaced"
    textKey: "ADVICE_ZOMBIE_ONSLAUGHT"
    action: "waitForLevelEnd"

# === 波次配置 (Story 17.2 新格式) ===
waves:
  # 第一波：常规波次
  - waveNum: 1
    type: "Fixed"
    delay: 5
    zombies:
      - type: "basic"
        lanes: [3]
        count: 1
        spawnInterval: 2.0

  # 第二波
  - waveNum: 2
    type: "Fixed"
    delay: 8
    zombies:
      - type: "basic"
        lanes: [3]
        count: 1
        spawnInterval: 2.0

  # 第三波
  - waveNum: 3
    type: "Fixed"
    delay: 10
    zombies:
      - type: "basic"
        lanes: [3]
        count: 1
        spawnInterval: 2.0

  # 第四波（最终波）
  - waveNum: 4
    type: "Final"
    delay: 12
    zombies:
      - type: "basic"
        lanes: [3]
        count: 2
        spawnInterval: 2.0
