# Level 1-1 (新格式示例)
# Story 17.2: 关卡脚本格式升级
# 本文件展示新格式的完整字段定义，用于参考和测试

# === 顶层字段 (Story 17.2 新增) ===
id: "1-1"                      # 关卡ID
name: "前院白天 1-1 (v2)"       # 关卡名称
description: "教学关卡：学习基本的植物种植和僵尸防御（新格式版本）"

flags: 0                       # 旗帜数量 (本关卡无旗帜波次)
sceneType: "day"               # 场景类型: day, night, pool, fog, roof, moon
rowMax: 5                      # 最大行数: 前院/屋顶 5 行，后院 6 行

# === 开场配置 ===
openingType: "tutorial"        # 教学关卡
enabledLanes: [3]              # 只启用第3行（中间行）
availablePlants:               # 只有豌豆射手
  - "peashooter"
rewardPlant: "sunflower"       # 完成本关奖励向日葵
skipOpening: false             # 启用完整开场动画
initialSun: 150                # 初始阳光150

# === 背景和草皮配置 ===
backgroundImage: "IMAGE_BACKGROUND1UNSODDED"
sodRowImage: "IMAGE_SOD1ROW"
showSoddingAnim: true
soddingAnimDelay: 1.0
preSoddedLanes: []
sodRollAnimation: true
sodRollParticles: true

# === 教学步骤 ===
tutorialSteps:
  - trigger: "gameStart"
    textKey: "ADVICE_CLICK_SEED_PACKET"
    action: "waitForSeedClick"
  - trigger: "seedClicked"
    textKey: "ADVICE_CLICK_ON_GRASS"
    action: "waitForPlantPlaced"
  - trigger: "plantPlaced"
    textKey: "ADVICE_PLANTED_PEASHOOTER"
    action: "waitForSunSpawn"
  - trigger: "sunSpawned"
    textKey: "ADVICE_CLICK_ON_SUN"
    action: "waitForSunClick"
  - trigger: "sunClicked"
    textKey: "ADVICE_CLICKED_ON_SUN"
    action: "waitForEnoughSun"
  - trigger: "sunClickedWhenEnough"
    textKey: "ADVICE_ENOUGH_SUN"
    action: "reminder"
  - trigger: "enoughSunAndCooldown"
    textKey: "ADVICE_CLICK_PEASHOOTER"
    action: "waitForSecondSeedClick"
  - trigger: "secondSeedClicked"
    textKey: "ADVICE_CLICK_ON_GRASS"
    action: "waitForSecondPlantPlaced"
  - trigger: "secondPlantPlaced"
    textKey: "ADVICE_ZOMBIE_ONSLAUGHT"
    action: "waitForLevelEnd"

# === 波次配置 (新格式字段) ===
waves:
  # 第一波：常规波次
  - waveNum: 1                  # 波次编号（从 1 开始）
    type: "Fixed"               # 波次类型: Fixed (固定出怪), ExtraPoints (动态点数), Final (最终波)
    delay: 5                    # 游戏开始后延迟（秒）
    extraPoints: 0              # 额外点数（仅 ExtraPoints 类型使用）
    laneRestriction: []         # 行限制（可选，限定僵尸出现的行）
    zombies:
      - type: "basic"
        lanes: [3]              # 可出现的行列表
        count: 1
        spawnInterval: 2.0

  # 第二波
  - waveNum: 2
    type: "Fixed"
    delay: 8
    zombies:
      - type: "basic"
        lanes: [3]
        count: 1
        spawnInterval: 2.0

  # 第三波
  - waveNum: 3
    type: "Fixed"
    delay: 10
    zombies:
      - type: "basic"
        lanes: [3]
        count: 1
        spawnInterval: 2.0

  # 第四波（最终波）
  - waveNum: 4
    type: "Final"               # 标记为最终波
    delay: 12
    isFlag: false               # 本关卡无旗帜波次
    zombies:
      - type: "basic"
        lanes: [3]
        count: 2
        spawnInterval: 2.0
