# 经典《植物大战僵尸》PC中文年度版参考数据说明
<img src="https://upload.wikimedia.org/wikipedia/en/6/66/Plants_vs._Zombies_logo.png" alt="PvZ Logo" width="300" />

## 目录

1.  **启动序列与加载机制**
2.  **主菜单系统（年度版特色）**
3.  **冒险模式：全五大场景深度解析 (附数据)**
4.  **附加游戏模式详解**
5.  **禅境花园与智慧树系统**
6.  **疯狂戴夫的道具店**
7.  **图鉴与辅助系统**
8.  **核心数据附录：植物、僵尸与道具详解**
9.  **视听美学与动画细节**
10. **技术细节与版本差异**

---

## 一、启动序列与加载机制

游戏从双击图标开始，经历一系列精心设计的品牌展示与资源加载过程。

### 1. 合作伙伴与开发商Logo展示
1.  **PopCap Games Logo**：
    *   **画面**：深蓝色背景，中间出现白色的“PopCap”圆润字体Logo。
    *   **动画**：Logo周围有细微的蓝色光晕闪烁，随后是一个标志性的光点从Logo左侧划到右侧，“叮”的一声清脆音效。
2.  **合作伙伴Logo（视发行版本而定）**：
    *   中文版通常会显示代理商或汉化组的Logo（如上海宝开等），通常静态展示2-3秒。

### 2. 加载界面 (Loading Screen)
这是进入主菜单前的过渡。
*   **背景**：一张虚化的、暖色调的草坪背景图。
*   **前景元素**：屏幕中央偏下有一排植物的剪影（向日葵、豌豆射手、坚果墙等）仿佛走在山坡上。
*   **进度条**：
    *   **位置**：屏幕最下方。
    *   **设计**：并非传统的实体进度条，而是随着加载进度，绿色的草皮从左向右生长，填满底部的沟壑。
    *   **文字**：进度条上方显示“Loading...”字样，中文版为系统宋体或圆体的“正在加载...”。
    *   **动态**：偶尔会有一个光点滚过。

### 3. “点击开始”界面
*   **画面**：加载完成后，画面直接切入主菜单背景（白天草坪），但被一层半透明蒙版覆盖。
*   **交互**：屏幕中央浮现一个巨大的、带有木纹边缘的按钮，上书**“点击开始 (Click to Start)”**。
*   **音效**：鼠标悬停时发出轻微的树叶摩擦声；点击时发出类似敲击木头或泥土的闷响，蒙版淡出，进入主菜单。

---

## 二、主菜单系统

主菜单是游戏的枢纽，采用了极具辨识度的墓地风格UI设计。

### 1. 视觉环境
*   **背景**：玩家的房子位于左侧，门廊可见。前方是绿色的草坪，远处有蓝天白云。右侧是墓地区域。
*   **动态细节**：
    *   天空中的云朵极其缓慢地从右向左飘动。
    *   左下角草丛的叶子会轻微晃动。
    *   墓碑开始会从地下升起

### 2. 核心功能区（墓碑菜单）

#### 2.1 整体设计说明

游戏的主要模式通过从地底升起的墓碑按钮来选择。四个菜单项按从上到下的顺序排列在墓碑上。

**视觉状态机制**：
- **默认状态**：墓碑动画已包含默认显示的菜单项图片
- **高亮状态**：鼠标悬停时，使用后缀为 `_Highlight` 的同名图片替换（仅解锁状态）
- **锁定状态**：未解锁时，使用图片名中间包含 `_shadow_` 的同名半透明图片覆盖

#### 2.2 四大菜单项配置

| 菜单项 | 位置 | 按钮图片资源 | 解锁条件 | 附加说明 |
|--------|------|------------|---------|---------|
| **冒险模式 (Adventure)** | 第1项（最上方） | 见下方详细说明 | 默认解锁 | 显示逻辑根据用户状态变化 |
| **玩玩小游戏 (Mini-Games)** | 第2项 | `SelectorScreen_Survival_button` | 通关冒险模式 3-2 | - |
| **解谜模式 (Puzzle)** | 第3项 | `SelectorScreen_Challenges_button` | 通关冒险模式 | 包含"砸罐子"和"我是僵尸" |
| **生存模式 (Survival)** | 第4项 | `SelectorScreen_Vasebreaker_button` | 通关冒险模式 | - |

#### 2.3 冒险模式菜单显示逻辑

冒险模式菜单项的显示根据用户状态动态变化：

**场景1：新用户 / 未选择用户**
- **按钮轨道**：`SelectorScreen_StartAdventure_button`
- **文本显示**：无关卡进度文本

**场景2：已有进度的用户**
- **按钮轨道**：`SelectorScreen_Adventure_button`
- **关卡进度显示**：
  - 位置：菜单项下方
  - 格式：`LEVEL X-Y`（例如：`LEVEL 1-4`）
  - 数字资源：`assets/images/SelectorScreen_LevelNumbers.png`
  - 说明：该图片包含 0-9 十个数字，需根据当前关卡组合显示
  - 因为按钮不是水平的,有点左高右低倾斜度,这样渲染数据,2个数字是同一水平线,和图片不协调.而且应该是要先渲染在墓碑按钮上,然后再开始动画的,而不是固定渲染在屏幕上.

#### 2.4 交互行为规范

| 菜单状态 | 鼠标悬停 | 点击行为 | 音效 |
|---------|---------|---------|------|
| **已解锁** | 悬停时鼠标手形，菜单高亮（显示 `SelectorScreen_{item}_Highlight` 图） | 进入对应模式 | 石块摩擦音效 |
| **未解锁** | 悬停时鼠标手形，按钮轨道是要显示的, 轨道 SelectorScreen_{item}_shadow  是半透明的阴影效果,要显示出来, 是覆盖在按钮上的，以展示未解锁的效果） | 弹出未解锁提示框 | 无音效 |


墓碑升起动画 只播放一次，然后停止, 主动画的逻辑不确定是不是anim_idle , 应该是背景\树\房子等 要一直显示, 
云朵飘动应该周期性出现，而不是持续飘动, 草丛应该周期性晃动，而不是持续, 花朵应该要触发才显示. 

### 3. 用户管理系统

#### 3.1 用户栏（左上角木牌UI）

**视觉呈现：**
- 使用 `selectorscreen` 动画中的 `anim_sign` 轨道
- 木牌样式UI，显示标题"欢迎回来，我的朋友！"
- 标题下方显示当前用户名

**交互行为：**
- **悬停状态**：鼠标悬停在用户名区域时，切换为 `SelectorScreen_WoodSign2_press` 图片
- **点击行为**：打开用户管理对话框

---

#### 3.2 用户管理对话框

**对话框结构：**

| 区域 | 说明 |
|------|------|
| **标题区域** | 顶部显示"你叫啥？" |
| **用户列表区域** | • 按创建日期排序显示所有用户<br>• 当前用户项背景为绿色（选中状态）<br>• 列表末尾显示"建立一位新用户"选项 |
| **操作按钮区** | 4个石板风格按钮（详见下表） |

**操作按钮详解：**

| 按钮位置 | 按钮文字 | 点击行为 |
|---------|---------|---------|
| **左上** | 重命名 | 弹出重命名对话框（见 3.4） |
| **右上** | 删除 | 弹出删除确认对话框（见 3.5） |
| **左下** | 好 | • 如果选中的用户 ≠ 当前用户：切换用户并关闭对话框<br>• 如果选中的用户 = 当前用户：直接关闭对话框 |
| **右下** | 取消 | 关闭对话框，不做任何操作 |

---

#### 3.3 新建用户对话框

**触发条件：**
- 点击用户列表中的"建立一位新用户"

**对话框内容：**
- **标题**：新用户
- **描述文字**：请输入你的名字：
- **输入框**：使用 `editbox.gif` 作为背景
- **按钮**：`好` | `取消`

**用户名验证规则：**
- 允许字符：大小写英文字母、数字、空格
- 不允许：空用户名

**空用户名处理逻辑：**
- 如果用户名为空，点击`好`或`取消`按钮时弹出提示框：
  - **标题**：输入你的名字
  - **描述**：请输入你的名字，以创建新的用户档案。档案用于保存游戏积分和进度。
  - **按钮**：`好`（关闭提示框，重新显示新建用户对话框）

---

#### 3.4 重命名用户对话框

**对话框内容：**
- **标题**：重命名用户
- **描述文字**：请输入你的名字：
- **输入框**：使用 `editbox.gif`，默认填充选中用户的当前用户名
- **按钮**：`好` | `取消`
- **验证规则**：同新建用户（见 3.3）

---

#### 3.5 删除用户确认对话框

**对话框内容：**
- **标题**：你确定吗？
- **描述文字**：从玩家簿中永久删除 '{username}'!
- **按钮**：`是` | `否`
- **无输入框**

---

#### 3.6 游戏启动时的用户状态处理

**场景A：无存档用户（首次启动）**

1. **动画播放**：仅播放 `anim_open` 动画
2. **强制新建**：自动弹出新建用户对话框（见 3.3）
3. **不可跳过**：必须创建用户才能进入游戏
4. **创建成功后**：
   - 播放 `anim_sign` + `anim_grass` 动画
   - 左上角用户栏显示新建的用户名

**场景B：有存档用户（非首次启动）**

1. **动画播放**：播放 `anim_open` + `anim_sign` + `anim_grass` 动画
2. **用户栏显示**：左上角显示上次登录的用户名
3. **可选切换**：玩家可点击用户栏手动切换用户

  完整动画流程

  ┌─────────────────────────────────────────────────────────────┐
  │                    首次启动流程 (AC8)                        │
  └─────────────────────────────────────────────────────────────┘

  1. 游戏启动
     ↓
  2. 检测无用户 → isFirstLaunch = true
     ↓
  3. 播放 anim_open（仅背景展开）
     ↓
  4. 弹出新建用户对话框
     ↓
  5. 用户输入用户名，点击"好"
     ↓
  6. SaveManager.CreateUser(username)
     ↓
  7. initUserSign() - 在木牌上设置用户名
     ↓
  8. 播放 anim_sign + anim_grass（木牌和草动画）
     ↓
  9. 显示完整主菜单（包括用户名）

  ┌─────────────────────────────────────────────────────────────┐
  │                    非首次启动流程                            │
  └─────────────────────────────────────────────────────────────┘

  1. 游戏启动
     ↓
  2. 检测有用户 → isFirstLaunch = false
     ↓
  3. 播放 "opening" 组合（anim_open + anim_sign）
     ↓
  4. initUserSign() - 加载当前用户名
     ↓
  5. 显示完整主菜单（包括用户名）
---

### 4. 底部功能栏

> **📌 实现阶段说明：**
> - **Story 12.3**: 实现对话框系统基础设施（九宫格拉伸、蒙板叠加、帮助面板、选项面板）
> - **Story 12.2**: 实现 3 个花瓶按钮并集成对话框功能

屏幕右下角有3个花瓶样的按钮(背景图已经显示)，只需要在花瓶位置显示下面的对应图片即可（图片为菜单名称），鼠标悬浮时， 鼠标切换为手形，并切换为对应的高亮图片：
*   **选项 (Options)**
点击后，显示之前实现过的菜单弹出框 ，但弹出框中不显示继续、重新开始按钮，返回游戏按钮的按钮文字改为 `确定`.

*   **帮助 (Help)**
点击后，居中显示这些图片. 每个图需要叠加对应的蒙板。
图片下方显示 `确定` 按钮，点击后，关闭帮助面板

**资源文件：**
- 便笺背景图
  - `assets/images/ZombieNote.jpg` (RGB 图层)
  - `assets/images/ZombieNote_.png` (Alpha 蒙板)

- 帮助文本图
  - `assets/images/ZombieNoteHelp.png` (黑底白字)
  - `assets/images/ZombieNoteHelpBlack.png` (无效蒙板，全黑占位符)

**实现方法（Story 12.3 已完成）：**

1. **便笺背景处理**：
   - 使用 `utils.ApplyAlphaMask(bgJPG, bgMask)` 合成 RGB 和 Alpha 通道
   - 实现边缘透明效果

2. **帮助文本处理**（黑底白字 → 透明底黑字）：
   - **自蒙板技术**：使用 `utils.ApplyAlphaMask(textPNG, textPNG)`
     - 白色文字（高亮度）→ 不透明
     - 黑色背景（低亮度）→ 完全透明
   - **颜色转换**：将所有像素 RGB 设为纯黑 (0, 0, 0)，保持 Alpha 通道
   - **关键技术**：应用预乘 Alpha 概念消除白边残留
     - 预乘公式：`finalRGB = targetRGB * (alpha / 255)`
     - 黑色特性：`0 * (alpha / 255) = 0`，天然适配
     - 参考实现：`resource_manager.go` 的 `LoadCompositedImage()`

3. **延迟处理机制**：
   - Alpha 蒙板合成在首次 `Draw()` 时执行（避免游戏启动前调用 `ReadPixels` 导致 panic）
   - 使用 `composited` 标记确保只处理一次

4. **模块化设计**：
   - 实现位置：`pkg/modules/help_panel_module.go`
   - 核心方法：`applyAlphaMasks()`, `convertToBlack()`
   - 可在多个场景复用（主菜单、游戏场景等）

*   **退出 (Quit)**

点击后关闭游戏

#### 对应按钮的图片

- 菜单名称图片
assets/images/SelectorScreen_Help1.png
assets/images/SelectorScreen_Options1.png
assets/images/SelectorScreen_Quit1.png

- 菜单名称高亮图片
assets/images/SelectorScreen_Help2.png
assets/images/SelectorScreen_Options2.png
assets/images/SelectorScreen_Quit2.png

### 5. 解锁功能区
随着游戏进程，主菜单会增加新的入口：
*   **图鉴 (Almanac)**：通关2-4后解锁。一本放在草地左下角的书，封面有僵尸图案。
*   **商店 (Shop)**：通关3-4捡到车钥匙后解锁。原本空置的车道上会出现疯狂戴夫的汽车后备箱。
*   **禅境花园 (Zen Garden)**：通关5-4后解锁。在模式墓碑右侧出现一个金色的喷壶。
*   **成就 (Achievements)**：年度版特色。在禅境花园喷壶下方，显示为一个奖杯图标。

## 三、冒险模式：全五大场景深度解析 (含开场动画、核心设计与数据)

> **【标准开场动画流程】说明：**
> 绝大多数关卡遵循此流程。玩家在“选择你的植物”界面完成选择后，点击“开战(Let's Rock!)”。此时，伴随着一阵标志性的、低沉的“呜——”声，镜头会从左侧的房子前快速向右平移，**依次展示本关即将出现的所有僵尸种类**（它们会静立在屏幕右侧的僵尸刷新区，作为战前预告）。平移结束后，镜头迅速返回左侧的草坪，游戏正式开始。

### 第一章：前院白天 (Day)
*   **环境特征**：绿草地，阳光充足，5台割草机作为最后防线。

| 关卡 | 场地 | 新解锁植物 (附数据) | 新登场僵尸 (附数据) | 开场动画与核心设计 |
| :--- | :--- | :--- | :--- | :--- |
| **1-1** | 1行草地 | **豌豆射手**: 100阳光, 300 HP, 伤害20 | **普通僵尸**: 270 HP | **【特殊开场】** 无选卡与镜头平移。游戏直接进入单行草坪战场，通过教学文字强制引导玩家拾取阳光和种植唯一的豌豆射手，是极简化的核心玩法教学。 |
| **1-2** | 3行草地 | **向日葵**: 50阳光, 300 HP, 产出25阳光 | - | **【标准开场】** 首次出现选卡界面。镜头右移首次预告“普通僵尸”。核心是引入“经济”概念和多行作战。 |
| **1-3** | 3行草地 | **樱桃炸弹**: 150阳光, 3x3范围伤害1800 | **路障僵尸**: 640 HP | **【标准开场】** 镜头右移预告新增的“路障僵尸”。核心是教学AOE爆发伤害和“道具”类僵尸。 |
| **1-4** | 5行(完整) | **坚果墙**: 50阳光, **4000 HP** | - | **【标准开场】** 镜头平移返回后，首次呈现完整的5行草坪战场。核心是教学“防御型”植物的概念，同时解锁铲子。 |
| **1-5** | 5行 | **土豆地雷**: 25阳光, 300 HP, 伤害1800 | - | **【特殊开场】** 无选卡与镜头平移。画面中央出现“坚果保龄球”标题卡。这是对迷你游戏玩法的首次引入，改变核心规则。 |
| **1-6** | 5行 | **寒冰射手**: 175阳光, 300 HP, 伤害20+减速 | **撑杆僵尸**: 500 HP | **【标准开场】** 镜头右移预告新增的“撑杆僵尸”。核心是教学“减速控制”和应对“跳跃”类敌人。 |
| **1-7** | 5行 | **大嘴花**: 150阳光, 300 HP, 秒杀 | - | **【标准开场】** 镜头平移展示僵尸。核心是教学“秒杀”机制及其长冷却时间的风险与回报。 |
| **1-8** | 5行 | **双发射手**: 200阳光, 300 HP, 伤害20x2 | **铁桶僵尸**: 1370 HP | **【标准开场】** 镜头右移预告强敌“铁桶僵尸”。本关是第一章的难度拐点，考验玩家的火力集中能力。 |
| **1-9** | 5行 | - | - | **【标准开场】** 镜头平移展示本章所有僵尸。本关是对第一章所学知识的综合应用与巩固。 |
| **1-10**| 5行 | **小喷菇**: 0阳光, 300 HP, 伤害20 | - | **【特殊开场】** 无选卡与镜头平移。传送带关卡，强制玩家使用系统给予的植物，考验临场应变能力。 |

---

### 第二章：前院黑夜 (Night)
*   **环境特征**：夜景，天空不掉阳光，场地随机出现**墓碑**（800 HP）。

| 关卡 | 新解锁植物 (附数据) | 新登场僵尸 (附数据) | 开场动画与核心设计 |
| :--- | :--- | :--- | :--- |
| **2-1** | **阳光菇**: 25阳光, 300 HP, 产出15->25阳光 | **读报僵尸**: 420 HP | **【标准开场】** 镜头返回后，首次展示夜间场景和墓碑。核心是引入环境障碍、新经济模式和“狂暴”型僵尸。 |
| **2-2** | **大喷菇**: 75阳光, 300 HP, 伤害20(穿透) | - | **【标准开场】** 镜头平移展示僵尸。核心是教学“穿透”攻击属性，克制成排的敌人。 |
| **2-3** | **墓碑吞噬者**: 75阳光, 300 HP, 清除墓碑 | **铁栅门僵尸**: 1370 HP | **【标准开场】** 镜头右移预告“铁栅门僵尸”。核心是教学针对性策略（穿透攻击、磁力菇）和环境清理植物。 |
| **2-4** | **魅惑菇**: 75阳光, 300 HP, 策反僵尸 | - | **【标准开场】** 镜头平移展示僵尸。核心是教学“控制”和“化敌为友”的战术。同时解锁图鉴。 |
| **2-5** | **胆小菇**: 25阳光, 300 HP, 伤害20 | - | **【特殊开场】** 无选卡与镜头平移。出现“僵尸打地鼠”标题卡。考验玩家的反应速度。 |
| **2-6** | **寒冰菇**: 75阳光, 全屏冻结+伤害20 | **橄榄球僵尸**: 1670 HP | **【标准开场】** 镜头右移预告“橄榄球僵尸”。核心是教学“全屏控场”技能应对高速高防敌人。 |
| **2-7** | **毁灭菇**: 125阳光, 3x3范围伤害1800 | - | **【标准开场】** 镜头平移展示僵尸。核心是教学高风险高回报的终极AOE，并引入“地形破坏”机制（弹坑）。 |
| **2-8** | **睡莲**: 25阳光, 300 HP | **舞王僵尸**: 500 HP | **【标准开场】** 镜头右移预告“舞王僵尸”。核心是教学应对“召唤”类敌人，需要快速集火本体。 |
| **2-9** | - | - | **【标准开场】** 镜头平移展示夜间混合僵尸。本关是对第二章的综合考验。 |
| **2-10**| **窝瓜**: 50阳光, 300 HP, 伤害1800 | - | **【特殊开场】** 无选卡与镜头平移。夜间传送带关卡，大量墓碑使战场空间受限，节奏紧凑。 |

---

### 第三章：后院泳池 (Pool)
*   **环境特征**：白天，6行场地含2行水域，最后防线为**池塘清洁车**。

| 关卡 | 新解锁植物 (附数据) | 新登场僵尸 (附数据) | 开场动画与核心设计 |
| :--- | :--- | :--- | :--- |
| **3-1** | **三线射手**: 325阳光, 300 HP, 伤害20x3 | **潜水僵尸**: 270 HP | **【标准开场】** 镜头返回后首次展示后院泳池。核心是引入“水路”和“陆路”分区作战概念，以及“潜行”类敌人。 |
| **3-2** | **缠绕水草**: 25阳光, 300 HP, 秒杀水中僵尸 | **冰车僵尸**: 1350 HP | **【标准开场】** 镜头右移预告“冰车僵尸”。核心是教学“载具”类敌人及其碾压和地形改变（冰道）能力。 |
| **3-3** | **火爆辣椒**: 125阳光, 整行伤害1800 | - | **【标准开场】** 镜头平移展示僵尸。核心是教学整行清除和清除负面地形（冰道）的植物。 |
| **3-4** | **地刺**: 100阳光, 伤害20/次 | - | **【标准开场】** 镜头平移展示僵尸。核心是教学“陷阱”类植物，及其克制载具的特性。同时解锁商店。 |
| **3-5** | **火炬树桩**: 175阳光, 650 HP, 豌豆伤害x2 | - | **【标准开场】** 镜头平移展示大量小僵尸。本关是“小僵尸大麻烦”的冒险版，考验群体攻击和快速反应。 |
| **3-6** | **高坚果**: 125阳光, **8000 HP** | **海豚骑士僵尸**: 770 HP | **【标准开场】** 镜头右移预告“海豚骑士僵尸”。核心是教学使用高级防御植物克制水路跳跃敌人。 |
| **3-7** | **海蘑菇**: 0阳光, 300 HP, 伤害20 | - | **【标准开场】** 镜头平移展示僵尸。引入水路免费植物，丰富战术选择。 |
| **3-8** | **路灯花**: 25阳光, 300 HP | **玩偶匣僵尸**: 270 HP | **【标准开场】** 镜头右移预告“玩偶匣僵尸”。核心是教学应对“自爆”类敌人，引入随机性风险。 |
| **3-9** | - | - | **【标准开场】** 镜头平移展示泳池混合僵尸。本关是对第三章的综合考验。 |
| **3-10**| **仙人掌**: 125阳光, 300 HP, 伤害20 | - | **【特殊开场】** 无选卡与镜头平移。泳池场景的传送带关卡，考验水陆两栖作战的应变能力。 |

---

### 第四章：后院雾夜 (Fog)
*   **环境特征**：泳池+黑夜+**浓雾**。

| 关卡 | 新解锁植物 (附数据) | 新登场僵尸 (附数据) | 开场动画与核心设计 |
| :--- | :--- | :--- | :--- |
| **4-1** | **三叶草**: 100阳光, 吹走气球/浓雾 | **气球僵尸**: 270 HP | **【标准开场】** 镜头返回后首次展示雾天场景。核心是引入“视野限制”机制和“飞行”类敌人。 |
| **4-2** | **双向射手**: 125阳光, 300 HP, 伤害20(前后) | **矿工僵尸**: 270 HP | **【标准开场】** 镜头右移预告“矿工僵尸”。核心是教学应对“绕后”偷袭的敌人，强调防线纵深。 |
| **4-3** | **杨桃**: 125阳光, 300 HP, 伤害20/星 | - | **【标准开场】** 镜头平移展示僵尸。核心是教学多向攻击植物，适合雾天这种难以判断敌人线路的场景。 |
| **4-4** | **南瓜头**: 125阳光, **4000 HP** | **跳跳僵尸**: 270 HP | **【标准开场】** 镜头右移预告“跳跳僵尸”。核心是教学使用“保护套”加固关键植物和应对陆路跳跃敌人。 |
| **4-5** | **磁力菇**: 100阳光, 300 HP, 吸取金属 | - | **【特殊开场】** 无选卡与镜头平移。出现“砸罐子”标题卡。考验策略、运气和临场反应。 |
| **4-6** | **卷心菜投手**: 100阳光, 300 HP, 伤害40 | - | **【标准开场】** 镜头平移展示僵尸。为屋顶关卡铺垫，引入“抛物线”攻击方式。 |
| **4-7** | **花盆**: 25阳光, 300 HP | - | **【标准开场】** 镜头平移展示僵尸。同样为屋顶关卡铺垫，引入“种植平台”概念。 |
| **4-8** | **玉米投手**: 100阳光, 300 HP, 伤害20/40 | - | **【标准开场】** 镜头平移展示僵尸。引入带“眩晕”控制的抛物线攻击植物。 |
| **4-9** | - | - | **【标准开场】** 镜头平移展示僵尸。本关雾气极为浓重，是第四章视野限制的终极挑战。 |
| **4-10**| **咖啡豆**: 75阳光, 唤醒蘑菇 | - | **【特殊开场】** 无选卡与镜头平移。场景漆黑，只有随机闪电照亮，极度考验记忆力和反应，是气氛渲染的巅峰关卡。 |

---

### 第五章：屋顶 (Roof)
*   **环境特征**：白天，倾斜屋顶，必须用**花盆**，最后防线为**屋顶推车**（需购买）。

| 关卡 | 新解锁植物 (附数据) | 新登场僵尸 (附数据) | 开场动画与核心设计 |
| :--- | :--- | :--- | :--- |
| **5-1** | **大蒜**: 50阳光, 400 HP | **蹦极僵尸**: 270 HP | **【特殊开场】** 选卡后，镜头从房屋底部向上倾斜运镜，强调战场环境改变。无僵尸预告，使“蹦极僵尸”的首次出现更具突然性。 |
| **5-2** | **叶子保护伞**: 100阳光, 300 HP | - | **【标准开场】** 屋顶场景，镜头上移后，首次在屋顶出现右移预告僵尸动画。核心是教学应对“空降”威胁。 |
| **5-3** | **金盏花**: 50阳光, 300 HP | **扶梯僵尸**: 500 HP | **【标准开场】** 镜头上移+右移，预告“扶梯僵尸”。核心是教学应对能“创造通路”的敌人，使高坚果等防线失效。 |
| **5-4** | **西瓜投手**: 300阳光, 300 HP, 伤害80+ | **投石车僵尸**: 500 HP | **【标准开场】** 镜头上移+右移，预告“投石车僵尸”。核心是教学应对“远程攻击后排”的敌人。 |
| **5-5** | - | - | **【标准开场】** 镜头上移+右移。本关是对屋顶所有机制（花盆、抛物线、空降）的巩固练习。 |
| **5-6** | - | **巨人僵尸**: **3000 HP** | **【标准开场】** 镜头上移+右移，首次预告体型巨大的“巨人僵尸”，极具压迫感。核心是教学使用瞬时高爆发伤害应对精英怪。 |
| **5-7** | - | - | **【标准开장】** 镜头上移+右移，预告将有复数的巨人僵尸来袭。考验玩家的爆发伤害循环能力。 |
| **5-8** | - | - | **【标准开场】** 镜头上移+右移，展示屋顶最终的混合僵尸阵容，难度极高。 |
| **5-9** | - | - | **【标准开场】** 最终决战前的标准流程，预告了最大规模的常规僵尸进攻。 |
| **5-10**| **银色向日葵奖杯** | **僵尸博士**: **28000 HP** | **【特殊开场】** 无选卡与镜头平移。巨大的僵尸机器人轰然落地，屏幕剧烈震动。这是最终BOSS战，融合了传送带、特殊技能应对等多种机制。 |

---

## 六、疯狂戴夫的道具店 (Crazy Dave's Twiddydinkies)

消耗游戏内金币购买道具和升级卡片。

### 1. 关键道具
*   **卡槽升级**：第7、8、9、10个卡槽，价格递增。
*   **池塘清洁车/屋顶推车**：购买后在对应关卡拥有最后防线。
*   **花园道具**：水族馆、蘑菇园、手推车（搬运植物）、蜗牛、智慧树。

### 2. 紫卡植物（升级植物）
这些植物必须种在对应的基础绿卡植物上。
*   **加特林豌豆** -> 种在双发射手之上。伤害20x4/轮。
*   **双子向日葵** -> 种在向日葵之上。一次产100阳光。
*   **忧郁菇** -> 种在大喷菇之上。3x3范围快速攻击，伤害20/发。
*   **香蒲** -> 种在睡莲之上。全屏追踪尖刺，伤害20/发，可打气球。
*   **冰瓜投手** -> 种在西瓜投手之上。伤害80+溅射20+群体减速。
*   **吸金磁** -> 种在磁力菇之上。自动吸取全屏金币/钻石。
*   **地刺王** -> 种在地刺之上。伤害40/次，能承受巨人一次重击。
*   **玉米加non炮** -> 需横向并在两株玉米投手之上。手动点击发射，3x3范围伤害1800，装填慢。
*   **模仿者**：可复制任意一张非紫卡植物，使其在单次关卡中拥有两个卡槽。

---

## 七、图鉴与辅助系统 (Suburban Almanac)

*   **界面**：一本古旧的书籍，左侧书签选植物，右侧选僵尸。
*   **植物图鉴**：显示植物外观、阳光消耗、冷却时间、伤害描述，以及一段幽默的背景故事。
*   **僵尸图鉴**：显示僵尸外观、强壮度、速度，以及特点描述和背景故事。遇到新僵尸后才会点亮。

---

## 八、核心数据附录：植物、僵尸与道具详解

### 植物数据总表
| 名称 | 阳光 | 冷却 | 生命值(HP) | 伤害/效果 | 备注 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **豌豆射手** | 100 | 快 | 300 | 20 | 基础远程单位 |
| **向日葵** | 50 | 快 | 300 | 生产25阳光 | 核心经济单位 |
| **樱桃炸弹** | 150 | 非常慢 | - | 1800 (3x3范围) | 瞬发，一次性 |
| **坚果墙** | 50 | 慢 | **4000** | 防御 | 核心肉盾 |
| **土豆地雷** | 25 | 慢 | 300 | 1800 (单格) | 需15秒激活 |
| **寒冰射手** | 175 | 快 | 300 | 20 + 减速 | 控制型射手 |
| **大嘴花** | 150 | 快 | 300 | 秒杀 | 咀嚼42秒 |
| **双发射手** | 200 | 快 | 300 | 20 x 2 | 火力升级 |
| **小喷菇** | 0 | 快 | 300 | 20 (射程短) | 夜间免费炮灰 |
| **阳光菇** | 25 | 快 | 300 | 生产15->25阳光 | 夜间经济单位 |
| **大喷菇** | 75 | 快 | 300 | 20 (穿透) | 穿透攻击 |
| **墓碑吞噬者** | 75 | 快 | 300 | 清除墓碑 | 功能性植物 |
| **魅惑菇** | 75 | 慢 | 300 | 策反僵尸 | 一次性 |
| **胆小菇** | 25 | 快 | 300 | 20 (远程) | 僵尸靠近会躲藏 |
| **寒冰菇** | 75 | 非常慢 | - | 20 + 全屏冻结 | 强力控场，一次性 |
| **毁灭菇** | 125 | 非常慢 | - | 1800 (3x3范围) | 留下弹坑，一次性 |
| **睡莲** | 25 | 快 | 300 | 水面平台 | - |
| **窝瓜** | 50 | 慢 | 300 | 1800 (单格) | 瞬发，一次性 |
| **三线射手** | 325 | 快 | 300 | 20 x 3 (三行) | - |
| **缠绕水草** | 25 | 慢 | 300 | 秒杀 (水中) | 水下地雷 |
| **火爆辣椒** | 125 | 非常慢 | - | 1800 (整行) | 清理冰道，一次性 |
| **地刺** | 100 | 慢 | - | 20/次 | 免疫碾压，可破车 |
| **火炬树桩** | 175 | 快 | **650** | 豌豆伤害x2 | 自身无攻击 |
| **高坚果** | 125 | 慢 | **8000** | 高级防御 | 阻挡跳跳和海豚 |
| **海蘑菇** | 0 | 慢 | 300 | 20 (射程短) | 水中免费炮灰 |
| **路灯花** | 25 | 慢 | 300 | 照亮3x3范围 | 驱散浓雾 |
| **仙人掌** | 125 | 快 | 300 | 20 (可对空) | 克制气球僵尸 |
| **三叶草** | 100 | 快 | - | 吹走气球和浓雾 | 一次性 |
| **双向射手** | 125 | 快 | 300 | 20 (前后) | 克制矿工僵尸 |
| **杨桃** | 125 | 快 | 300 | 20/星 (五向) | - |
| **南瓜头** | 125 | 慢 | **4000** | 保护植物 | 可套在植物上 |
| **磁力菇** | 100 | 快 | 300 | 吸取金属道具 | 需消化时间 |
| **卷心菜投手** | 100 | 快 | 300 | 40 | 抛物线攻击，克屋顶 |
| **花盆** | 25 | 快 | 300 | 屋顶平台 | - |
| **玉米投手** | 100 | 快 | 300 | 20(玉米) / 40(黄油)+定身 | 控制型投手 |
| **咖啡豆** | 75 | 快 | - | 唤醒蘑菇 | 一次性 |
| **大蒜** | 50 | 快 | **400** | 驱赶僵尸换行 | 功能性植物 |
| **叶子保护伞** | 100 | 快 | 300 | 保护3x3范围 | 克制蹦极和投石车 |
| **金盏花** | 50 | 慢 | 300 | 生产金币 | 经济作物 |
| **西瓜投手** | 300 | 快 | 300 | 80 + 溅射26 | 群体伤害 |
| **加特林豌豆** | 250 | 非常慢 | 300 | 20 x 4 | 紫卡，需双发射手 |
| **双子向日葵** | 150 | 非常慢 | 300 | 生产100阳光 | 紫卡，需向日葵 |
| **忧郁菇** | 150 | 非常慢 | 300 | 20/发 (3x3范围, 快速) | 紫卡，需大喷菇 |
| **香蒲** | 225 | 非常慢 | 300 | 20 (全屏追踪) | 紫卡，需睡莲 |
| **冰瓜投手** | 200 | 非常慢 | 300 | 80 + 溅射26 + 减速 | 紫卡，需西瓜投手 |
| **地刺王** | 125 | 非常慢 | - | 40/次 | 紫卡，需地刺 |
| **玉米加农炮** | 500 | 非常慢 | 500 | 1800 (3x3范围, 手动) | 紫卡，需2个玉米投手 |

### 僵尸与道具数据总表
| 名称 | 总生命值 (HP) | 构成 (本体+道具) | 速度 | 特殊能力 |
| :--- | :--- | :--- | :--- | :--- |
| 普通僵尸 | 270 | 270 | 慢 | 无 |
| 旗帜僵尸 | 270 | 270 | 慢 | 标志着新一波进攻 |
| 路障僵尸 | 640 | 270 + 路障(370) | 慢 | 头戴路障，增加防御 |
| 铁桶僵尸 | 1370 | 270 + 铁桶(1100) | 慢 | 头戴铁桶，极高防御 |
| 撑杆僵尸 | 500 | 500 | 快 | 跳过第一个遇到的植物 |
| 读报僵尸 | 420 | 270 + 报纸(150) | 慢->极快 | 报纸被毁后暴走 |
| 铁栅门僵尸 | 1370 | 270 + 铁门(1100) | 慢 | 手持铁门，免疫豌豆 |
| 橄榄球僵尸 | 1670 | 270 + 头盔(1400) | 快 | 速度快，防御高 |
| 舞王僵尸 | 500 | 500 | 慢 | 召唤4个伴舞僵尸 |
| 伴舞僵尸 | 270 | 270 | 慢 | - |
| 潜水僵尸 | 270 | 270 | 慢 | 水下潜行，免疫平射 |
| 冰车僵尸 | 1350 | 1350 | 快 | 碾压植物，留下冰道 |
| 雪橇僵尸小队 | 约1380 | (270 x 4) + 雪橇 | 快 | 出现于冰道上 |
| 海豚骑士僵尸 | 770 | 270 + 海豚(500) | 快 | 在水中跳过植物 |
| 玩偶匣僵尸 | 270 | 270 | 快 | 随机自爆，范围伤害1800 |
| 气球僵尸 | 270 | 270 | 慢 | 飞行，免疫大部分攻击 |
| 矿工僵尸 | 270 | 270 | 快 | 挖地道绕后 |
| 跳跳僵尸 | 270 | 270 | 中 | 跳跃前进，无视植物 |
| 蹦极僵尸 | 270 | 270 | - | 从天而降偷走植物 |
| 扶梯僵尸 | 500 | 500 | 快 | 在防御植物上放置梯子 |
| 投石车僵尸 | 500 | 500 | 慢 | 远程投掷篮球(伤害100) |
| 巨人僵尸 | 3000 | 3000 | 极慢 | 砸扁植物，半血投掷小鬼 |
| 红眼巨人僵尸 | **6000** | **6000** | 极慢 | 巨人僵尸的强化版 |
| 小鬼僵尸 | 270 | 270 | 快 | 由巨人投掷 |
| 僵尸博士 | **28000** | **28000** | - | 最终BOSS |
| **墓碑** | 800 | - | - | 阻挡种植，最终波出僵尸 |
| **梯子** | 500 | - | - | 放置后僵尸可翻越 |

---

您提出了一个非常精准且重要的细节！是的，**“闪烁效果”**是《植物大战僵尸》中一个关键的视觉反馈机制，但它在植物和僵尸身上的应用是不同的。这是一个区分敌我状态的重要设计。

我将立即把这一精确细节补充并整合到最终的典藏版白皮书中，使其在动画表现的描述上达到极致的完整和准确。

---

# 经典《植物大战僵尸》PC中文年度版 终极详解白皮书 (全景动画·最终典藏版)

<img src="https://upload.wikimedia.org/wikipedia/en/6/66/Plants_vs._Zombies_logo.png" alt="PvZ Logo" width="300" />

## 目录

1.  **启动序列与加载机制**
2.  **主菜单系统（年度版特色）**
3.  **冒险模式：全五大场景深度解析 (含开场动画、核心设计与数据)**
4.  **附加游戏模式详解**
5.  **禅境花园与智慧树系统**
6.  **疯狂戴夫的道具店**
7.  **图鉴与辅助系统**
8.  **核心数据附录：植物、僵尸与道具详解**
9.  **动画、视觉动力学与音效设计 (含命中反馈细节)**
10. **技术细节与版本差异**

---

## 九、动画、视觉动力学与音效设计

《植物大战僵尸》的成功，很大程度上归功于其卓越的美术、动画和音效设计。这些元素共同构建了一个充满活力和趣味性的世界。

### 1. 植物动画系统详解

每一种植物都拥有独特的动画循环，使其在静止时也充满生命力。

#### **豌豆射手 (Peashooter)**
*   **静止/待机**：身体轻微地左右摇摆，头顶的叶子像天线一样微微晃动。眼睛会不时眨动。
*   **攻击**：
    1.  嘴巴迅速向前嘟起，形成一个圆形的发射口。
    2.  身体向后微微压缩蓄力，然后猛地前倾。
    3.  一颗绿色的豌豆被“噗”地一声射出，带有旋转的拖尾特效。
    4.  发射后身体回弹，嘴巴恢复原状。
*   **被攻击**：被僵尸啃食时，整个身体会剧烈地前后抖动，表情变得痛苦（眼睛眯起），叶片会逐渐被啃掉。**值得注意的是，植物被攻击时没有闪烁效果，其生命状态完全通过物理动画和外观的破损程度来体现。**

#### **向日葵 (Sunflower)**
*   **静止/待机**：面带微笑，花瓣随着身体左右摇曳，像在跟着节拍跳舞。
*   **生产阳光**：
    1.  身体停止摇摆，面部表情变得专注。
    2.  身体向后仰，似乎在吸收能量。
    3.  猛地向前一挺，脸部发光，一颗明亮的阳光从其面部“诞生”，并向上飘起。
    4.  生产后，恢复微笑摇摆的待机状态。
*   **被攻击**：摇摆停止，微笑消失，表情变得惊恐。花瓣会被僵尸一片片啃掉，同样没有闪烁效果。

#### **坚果墙 (Wall-nut)**
*   **静止/待机**：身体非常稳定，偶尔眨一下大大的眼睛，给人一种可靠的感觉。
*   **被攻击（三阶段损耗）**：
    1.  **轻度受损**：表面出现几道裂纹，眼睛开始流露出担忧的神情。
    2.  **重度受损**：外壳被啃掉一大块，露出内部的果肉，眼睛变得惊恐万状，开始流汗。
    3.  **濒临摧毁**：外壳所剩无几，身体剧烈颤抖，眼睛紧闭，一副听天由命的表情。
*   **死亡**：被完全啃食后，会碎裂成几块，然后消失。

#### **樱桃炸弹 (Cherry Bomb)**
*   **种植**：落地时有一个Q弹的挤压和回弹动画。
*   **攻击（引爆）**：
    1.  两颗樱桃的导火索被点燃，发出“嘶嘶”声，火花四溅。
    2.  它们的表情变得愤怒而坚定（眉毛倒竖）。
    3.  1.2秒后，身体急剧膨胀并发出耀眼的红光，随即引发3x3范围的巨大爆炸，火焰特效和冲击波向外扩散。

#### **大嘴花 (Chomper)**
*   **静止/待机**：身体有节奏地上下起伏，像在呼吸，嘴巴微微张合，露出里面的小舌头。
*   **攻击**：
    1.  侦测到范围内的僵尸后，身体向后压缩蓄力。
    2.  猛地向前伸长，张开血盆大口，将僵尸一口吞下。
    3.  吞下后，身体缩回原位。
*   **消化**：嘴巴紧闭，腮帮子鼓起，并有规律地咀嚼蠕动，持续42秒。
*   **消化完毕**：打一个响亮的饱嗝，并冒出一小股绿色的气体，恢复待机状态，准备下次攻击。

### 2. 僵尸动画系统详解

僵尸的动画设计同样出色，通过细节展现了它们的笨拙、威胁和喜剧感。

#### **普通僵尸 (Zombie)**
*   **移动**：经典的僵尸步态。身体僵硬，步伐拖沓，双臂前伸，头部无神地晃动。
*   **静止/攻击**：遇到植物后停下脚步，上半身前倾，头部凑近植物，做出反复啃食的动作，伴有“咔嚓”音效。
*   **被攻击**：每次被豌豆等子弹击中，身体会有一个明显的后仰和停顿，领带会向后飘动。**同时，僵尸的全身会瞬间闪烁一下高亮的白色，这是最直观的命中反馈，让玩家能清晰地确认每一次攻击都已生效。**
*   **死亡（多状态）**：
    1.  **普通死亡**：生命值耗尽时，头部会先“啪”地一声掉落，身体在无头状态下继续向前走一两步，然后散架倒地。
    2.  **断臂**：生命值降到约50%时，有概率被打断一只手臂，但啃食动作和伤害不变。
    3.  **爆炸死亡**：被樱桃炸弹等炸飞时，会以夸张的姿势旋转着飞出屏幕。
    4.  **冰冻死亡**：被寒冰射手或冰瓜击杀时，身体会结冰并碎裂成冰块。
    5.  **燃烧死亡**：被火爆辣椒击杀时，会瞬间化为一撮黑色的灰烬。

#### **路障/铁桶僵尸 (Conehead/Buckethead Zombie)**
*   **动画**：基本与普通僵尸相同。
*   **被攻击（道具损耗）**：
    1.  **路障**：被攻击时，僵尸全身和路障会一同**白色闪烁**。路障上会出现裂纹，生命值耗尽后碎裂消失，僵尸变为普通僵尸。
    2.  **铁桶**：被攻击时，同样会**白色闪烁**，并发出“铛铛”的金属声和凹痕。铁桶掉落后，僵尸变为普通僵尸。

#### **读报僵尸 (Newspaper Zombie)**
*   **移动（阶段一）**：一边慢悠悠地行走，一边低头看报纸，姿态相对“斯文”。
*   **被攻击（报纸损毁）**：当报纸的生命值耗尽，报纸会碎裂。僵尸会停在原地，身体僵直，然后猛地抬头，双手举起，做出一个无声呐喊的愤怒动作，眼睛变红。
*   **移动（阶段二·暴走）**：行走动画的速率和幅度急剧增加，变成一种疯狂的冲刺，威胁性大增。

#### **撑杆僵尸 (Pole Vaulting Zombie)**
*   **移动（阶段一）**：双手持杆，以较快的速度向前助跑。
*   **攻击（跳跃）**：遇到第一个植物时，将撑杆插入地面，身体腾空而起，做出一个标准的跳高过杆动作，越过植物。
*   **移动（阶段二）**：跳跃后，丢掉撑杆，移动速度和动画变为和普通僵尸一样的慢速行走。

#### **巨人僵尸 (Gargantuar)**
*   **移动**：体型巨大，每走一步都感觉地动山摇。步伐沉重而缓慢，身体前倾，压迫感十足。
*   **攻击（砸击）**：
    1.  高高举起手中的电线杆（或鲨鱼/僵尸），有一个明显的蓄力前摇动作。
    2.  猛力将武器砸下，对植物造成毁灭性打击，伴有屏幕轻微震动效果。
*   **被攻击**：由于体型巨大，被普通子弹击中时几乎没有硬直，但**依然会有白色闪烁的命中反馈**。只有在受到爆炸等重创时身体才会晃动。
*   **特殊动作（投掷小鬼）**：生命值降至一半时，会停下脚步，将背上的小鬼僵尸（Imp）抓起并向前投掷出去。
*   **死亡**：不会散架，而是整个巨大的身体向后或向前缓慢地倾倒，最终重重地砸在地上消失。

### 3. 音乐与音效设计

#### **音乐 (Composed by Laura Shigihara)**
*   **风格**：融合了流行、放克及少量管弦乐，旋律洗脑且极富记忆点。
*   **动态音乐系统**：同一首曲子在每一波次中会根据紧张程度增加乐器轨道（如增加鼓点、贝斯线），在“一大波僵尸”来临时达到高潮，极大地增强了游戏的沉浸感和节奏感。
*   **代表曲目**：*Grasswalk* (前院白天), *Moongrains* (前院黑夜), *Watery Graves* (泳池), *Rigor Mormist* (浓雾), *Graze the Roof* (屋顶), *Loonboon* (迷你游戏)。

#### **音效 (SFX)**
*   **戴夫语音**：无意义的胡言乱语（Wabby Wabbo），极具辨识度。
*   **收集音效**：收集阳光的高音“叮”，收集金币的清脆声，收集钻石的震撼声。
*   **打击感**：豌豆打在僵尸身上的“噗噗”声，打在铁桶上的金属声，西瓜砸碎的闷响。
*   **僵尸语音**："Brains..."（低沉呻吟）, "The zombies are coming..."（警告语音），被击打时的呻吟，头掉落时的清脆断裂声。

---

## 十、技术细节与版本差异

### 1. 系统要求 (PC版极低门槛)
*   **OS**: Windows XP/Vista/7 (及后续兼容)
*   **CPU**: 1.2 GHz
*   **RAM**: 512+ MB
*   **显卡**: 128 MB 显存，支持 DirectX 8
*   **硬盘**: 65+ MB 可用空间

### 2. 存档位置
通常位于：`C:\ProgramData\PopCap Games\PlantsVsZombies\userdata`
*   `user1.dat` 等文件存储用户进度。
*   `users.dat` 存储用户索引。

### 3. 中文年度版独有特征总结
1.  **舞王僵尸形象变更**：因迈克尔·杰克逊遗产委员会的诉讼，原版红衣MJ造型被替换为爆炸头迪斯科舞者造型。
2.  **Zombatar系统**：主菜单可制作僵尸头像。
3.  **成就系统集成**：游戏内集成了成就列表。
4.  **汉化细节**：采用了贴合原版风格的中文字体（如方正粗圆等），戴夫的台词翻译保留了幽默感（如“歪比巴卜”）。