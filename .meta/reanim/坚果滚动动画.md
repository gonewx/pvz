基于提供的 `FlashReanimExportAsRaw_Xml.jsfl` 和 `.reanim` 数据分析，要实现坚果的**向前滚动**（类似保龄球模式），不能简单地播放动画，因为原始数据包含了一个**绕轴旋转的偏移量**（即坚果是绕着一个偏离中心的点旋转的，或者数据本身包含了位移）。

要实现自然的向前滚动，你需要将**逻辑位移**（代码控制）与**视觉动画**（XML数据）结合。以下是具体处理方案：

### 1. 核心原理：分离“位移”与“自转”

在 XML 数据中，`anim_face` 轨道的 `<x>` 和 `<y>` 数据形成了一个闭环的圆/椭圆轨迹（从 7 -> 96 -> -7 -> 6）。这意味着该动画描述的是坚果**绕着某个虚空中心点的旋转**，而不是原地的中心自转。

因此，实现滚动的公式为：
**渲染坐标 = 游戏逻辑坐标 + 动画帧偏移量**

### 2. 具体实现步骤

#### 步骤 A：确定游戏逻辑坐标 (Game Logic)
在你的游戏循环（Update Loop）中，控制坚果在世界坐标系中的直线移动。

```javascript
// 假设 fps = 12, 坚果半径 approx 35px
// 速度需要与动画播放速度匹配，否则会出现“滑步”
// 坚果周长 C = 2 * PI * R ≈ 220px
// 动画一圈 12 帧，即 1 秒。
// 所以水平速度 vx 约为 220 像素/秒

wallnut.x += speed * deltaTime; // 坚果在草坪上的实际位置
```

#### 步骤 B：应用轨道数据 (Rendering)
在渲染每一帧时，读取 XML 当前帧的数据，并叠加到逻辑坐标上。

*   **X轴处理 (`<x>`)**：
    XML 中的 `x` 值变化剧烈（0 -> 96 -> -7），这代表了旋转轴的偏差。**必须保留这个偏移量**，否则坚果会看起来像是不自然地抖动。
    $$RenderX = wallnut.x + FrameData.x \times Scale$$

*   **Y轴处理 (`<y>`)**：
    XML 中的 `y` 值变化（3 -> -7 -> 94）处理了坚果作为椭圆滚动时的“颠簸”感（长轴和短轴切换导致的高度差）。
    $$RenderY = wallnut.y + FrameData.y \times Scale$$
    *(注意：如果 XML 的 y 是相对于 Flash 舞台底部的，你可能需要减去一个基准值)*

*   **旋转处理 (`<kx>/<ky>`)**：
    直接应用 XML 中的旋转角度。
    $$Rotation = FrameData.kx$$

#### 步骤 C：解决“原地打转”视觉问题 (关键)

如果你直接应用上述公式，坚果可能会看起来像是在画圈而不是滚动。这是因为 XML 数据中的 `(0,0)` 点可能不是坚果的物理触地点。

**修正方案：同步偏移**
由于 XML 数据是一圈 360 度的完整旋转，且 `<x>` 数据也是一个闭环。你需要确保**逻辑移动的距离**正好等于**动画旋转一圈产生的位移**。

1.  **计算周长**：根据坚果图片的宽度估算周长（例如 200px）。
2.  **线性映射**：
    如果动画播放到了第 6 帧（旋转了 180 度，即 50% 进度），你的 `wallnut.x` 应该刚好向前移动了 50% 的周长（100px）。
    
    *   **如果不同步**：会出现“太空步”（转得快跑得慢）或“打滑”（跑得快转得慢）。

### 3. 代码逻辑伪代码

```javascript
// 假设动画总时长 12 帧
var totalFrames = 12;
var frameIndex = (currentTime * fps) % totalFrames;

// 从 XML 解析出的当前帧数据
var animData = GetFrameData("anim_face", frameIndex); 

// 1. 物理位置更新 (模拟匀速滚动)
// 这里的 speed 必须经过调试，以匹配 visuals 的旋转速度
// Speed = (Circumference * FPS) / TotalFrames
worldPosition.x += speed * dt; 

// 2. 渲染位置计算
// 关键：XML中的 x, y 是相对于旋转枢轴的局部偏移
var renderX = worldPosition.x + animData.x;
var renderY = worldPosition.y + animData.y;

// 3. 绘制
DrawSprite(
    texture: "IMAGE_REANIM_WALLNUT_BODY",
    x: renderX, 
    y: renderY, 
    rotation: animData.kx, // 旋转
    scaleX: animData.sx,   // 缩放
    scaleY: animData.sy    // 缩放
);
```
